<html>
  <head>
    <title>Immigration</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      window.onload = function LoadTopBar() {
        fetch("topBar.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("topBarID").innerHTML = data;
          });

        fetch("bottomBar.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("bottomBarID").innerHTML = data;
          });
      };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.0"></script>

    <style>
      :root {
        --primary-color: #161d9d;
      }

      .long_button {
        text-align: right;
        background-color: #c8102e;
        width: 40%;
        border: none;
        border-radius: 5px;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        font-size: 18px;
        color: #000000;
        margin-bottom: 10px;
        margin-top: 10px;
        margin-left: 20px;
        margin-right: 20px;
        transition:
          background-color 0.3s,
          font-size 0.3s;
        display: flex;
        flex-direction: column 1;
        justify-content: space-evenly;
      }

      .long_button:hover {
        background-color: #ee0d33;
        font-size: 19px;
        box-shadow:
          0 4px 8px 0 rgba(0, 0, 0, 0.2),
          0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }

      .sidebar_layout {
        display: grid;
        /* Definiert Spalten: 250px Navigation | Rest Inhalt */
        grid-template-columns: 250px 1fr;
        gap: 40px;
        max-width: 1200px;
        margin: 0 0;
        padding: calc(var(--topbar-height) + 40px) 20px 40px 20px;
      }

      .sidebar {
        height: auto;
        width: fit-content;
        padding-right: 40px;
        padding-left: 30px;
        background-color: #012169;
      }

      .sidebar_text {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        color: #ffffff;
        font-size: 20px;
      }

      /* --- 4. STICKY SIDEBAR (Navigation) --- */
      .sidebar {
        /* Das macht die Navigation "klebend" */
        position: sticky;
        top: calc(auto + 40px);
      }

      .nav-title {
        text-transform: uppercase;
        font-size: 0.5rem;
        font-weight: 700;
        color: var(--text-muted);
        margin-bottom: 1rem;
        letter-spacing: 0.05em;
      }

      .nav-links {
        list-style: none;
        border-left: 2px solid #e5e7eb; /* Die feine graue Linie links */
      }

      .nav-item a {
        display: block;
        padding: 0.5rem 0 0.5rem 1.5rem;
        color: var(--text-muted);
        text-decoration: none;
        transition: all 0.2s;
        border-left: 2px solid transparent; /* Platzhalter für den Aktiv-Strich */
        margin-left: -2px; /* Zieht den Rand auf die Linie */
      }

      .nav-item a:hover {
        color: var(--primary-color);
      }

      /* Klasse für den aktiven Abschnitt */
      .nav-item a.active {
        color: var(--primary-color);
        font-weight: 400;
        border-left-color: var(--primary-color);
      }

      .white_box {
        border-radius: 20px;
        box-shadow:
          0 4px 8px 0 rgba(0, 0, 0, 0.2),
          0 6px 20px 0 rgba(0, 0, 0, 0.19);
        border: 5px;
        border-color: gray;
        width: auto;
        height: fit-content;
        padding: 20px;
        margin: 30px 30px 30px 0px;
      }
    </style>
  </head>
  <body class="no_margin">
    <div id="topBarID"></div>
    <!--TopBar-->

    <div class="sidebar_layout">
      <aside class="sidebar sidebar_text">
        <ul class="nav-links">
          <li class="nav-item">
            <a href="#intro" class="nav-link active">Übersicht</a>
          </li>
          <li class="nav-item">
            <a href="#chart-section" class="nav-link">Datenverteilung</a>
          </li>
          <li class="nav-item">
            <a href="#demographics" class="nav-link">Demografie</a>
          </li>
          <li class="nav-item">
            <a href="#origins" class="nav-link">Herkunftsländer</a>
          </li>
          <li class="nav-item">
            <a href="#legal" class="nav-link">Rechtliche Grundlagen</a>
          </li>
        </ul>
      </aside>
      <main>
        <section id="intro hero" class="white_box">
          <p>Ganz Viel Text</p>
          <p>Noch viel mehr Text</p>
          <p>Auch ein bisschen Text</p>
        </section>

        <section id="chart-section" class="white_box">
          <p>Ganz Viel Text</p>
          <p>Noch viel mehr Text</p>
          <p>Auch ein bisschen Text</p>
        </section>

        <section id="demographics" class="white_box">
          <p>Ganz Viel Text</p>
          <p>Noch viel mehr Text</p>
          <p>Auch ein bisschen Text</p>
        </section>

        <section id="origins" class="white_box">
          <p>Ganz Viel Text</p>
          <p>Noch viel mehr Text</p>
          <p>Auch ein bisschen Text</p>
        </section>

        <section id="legal" class="white_box">
          <p>Ganz Viel Text</p>
          <p>Noch viel mehr Text</p>
          <p>Auch ein bisschen Text</p>
        </section>
      </main>
    </div>

    <div id="bottomBarID"></div>

    <!--Code für den Pie Chart (NICHT ANFASSEN!)-->
    <script>
      const xValues = ["India", "Poland", "Pakistan", "Romania", "Ireland"];
      const yValues = [965000, 841000, 654000, 558000, 387000];
      const barColors = ["#FF9933", "#DC143C", "#01411C", "#002B7F", "#169B62"];

      const ctx = document.getElementById("myChart");

      new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: xValues,
          datasets: [
            {
              backgroundColor: barColors,
              data: yValues,
            },
          ],
        },
        options: {
          plugins: {
            legend: { display: true },
            title: {
              display: true,
              text: "The 5 largest Groups of Immigrants",
              font: { size: 16 },
            },
          },
        },
      });

      // --- 2. Scroll Spy Logik (Navigation Highlighting) ---
      // Dies sorgt dafür, dass der Link links blau wird, wenn man zum Abschnitt scrollt

      const sections = document.querySelectorAll("section, .hero");
      const navLi = document.querySelectorAll(".sidebar .nav-links li a");

      window.onscroll = () => {
        var current = "";

        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          if (pageYOffset >= sectionTop - 150) {
            // -150 offset für Topbar
            current = section.getAttribute("id");
          }
        });

        navLi.forEach((a) => {
          a.classList.remove("active");
          if (a.getAttribute("href").includes(current)) {
            a.classList.add("active");
          }
        });
      };
    </script>
  </body>
</html>
